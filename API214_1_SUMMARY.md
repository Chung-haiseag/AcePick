# API214_1 한국마사회 경주성적정보 API 요약

## 📋 API 기본 정보

| 항목 | 값 |
|------|-----|
| **API 명** | API214_1 |
| **API 설명** | 한국마사회 경주성적 상세정보 |
| **서비스 URL** | http://apis.data.go.kr/B551015/API214_1 |
| **WSDL URL** | http://apis.data.go.kr/B551015/API214_1?_wadl&type=xml |
| **서비스 버전** | 1.0 |
| **서비스 시작일** | 2020-08-01 |
| **인증 방식** | ServiceKey (GPK1/NPK1) |
| **응답 형식** | XML, JSON, MIME, MTOM |
| **인터페이스 표준** | REST (GET) |

## 🔑 인증키

```
725f86c2e72ae4a10847e854827113c9959f61084843ef23d20934173f8418af
```

## 📡 상세기능 목록

### RaceDetailResult (경주성적정보)

**Call Back URL:**
```
http://apis.data.go.kr/B551015/API214_1/RaceDetailResult_1
```

**최대 메시지 사이즈:** 4000 byte  
**평균 응답 시간:** 500ms  
**초당 최대 트랜잭션:** 30 tps

## 📝 요청 파라미터

| 항목명 | 항목명(국문) | 크기 | 필수 | 샘플 | 설명 |
|--------|--------------|------|------|------|------|
| ServiceKey | 서비스키 | 4 | 1 | 00 | 공공데이터포털에서 발급 |
| numOfRows | 한 페이지 결과 수 | 4 | 1 | 10 | 한 페이지 결과 수 |
| pageNo | 페이지 번호 | 4 | 1 | 1 | 페이지 번호 |
| meet | 시행경마장 | 1 | 0 | 1 | 1:서울, 2:제주, 3:부경 |
| rc_year | 경주년도 | 4 | 0 | 2022 | 경주년도(YYYY 형식) |
| rc_month | 경주년월 | 6 | 0 | 202202 | 경주년월(YYYYMM 형식) |
| rc_date | 경주일자 | 8 | 0 | 20220220 | 경주일자(YYYYMMDD 형식) |
| rc_no | 경주번호 | 2 | 0 | 1 | 경주번호 |

**항목구분:**
- 필수(1), 옵션(0)
- 1 건 이상 복수건(1..n), 0 건 또는 복수건(0..n)

## 📤 응답 메시지

### Header

| 항목명 | 항목명(국문) | 크기 | 필수 | 샘플 | 설명 |
|--------|--------------|------|------|------|------|
| resultCode | 결과코드 | 2 | 1 | 00 | 결과코드 |
| resultMsg | 결과메시지 | 50 | 1 | NORMAL SERVICE | 결과메시지 |

### Body

| 항목명 | 항목명(국문) | 크기 | 필수 | 샘플 | 설명 |
|--------|--------------|------|------|------|------|
| numOfRows | 한 페이지 결과 수 | 4 | 1 | 10 | 한 페이지당 표출 데이터 수 |
| pageNo | 페이지 수 | 4 | 1 | 1 | 페이지 수 |
| totalCount | 데이터 총 개수 | 4 | 1 | 14 | 데이터 총 개수 |
| age | 연령 | 3 | 1 | 3 | 연령 |
| ageCond | 연령조건 | 20 | 1 | 3 세 | 연령조건 |
| birthday | 생년월일 | 8 | 1 | 20190407 | 생년월일 |

### 부경 구간 기록 (부산경남)

| 항목명 | 설명 |
|--------|------|
| bu_10_8fTime | 부경 10-8F 통과기록 |
| bu_1fGTime | 부경 1F-G 통과기록 |
| bu_2fGTime | 부경 2F-G 통과기록 |
| bu_3fGTime | 부경 3F-G 통과기록 |
| bu_4_2fTime | 부경 4-2F 통과기록 |
| bu_6_4fTime | 부경 6-4F 통과기록 |
| bu_8_6fTime | 부경 8-6F 통과기록 |
| buG1fAccTime | 부경 G1F 통과누적기록 |
| buG1fOrd | 부경 G1F 통과순위 |
| buG2fAccTime | 부경 G2F 통과누적기록 |
| buG2fOrd | 부경 G2F 통과순위 |
| buG3fAccTime | 부경 G3F 통과누적기록 |
| buG3fOrd | 부경 G3F 통과순위 |
| budam | 부담구분 (예: 별정 A) |

## 🔄 이전 API와의 차이점

### API4_3 (이전) vs API214_1 (신규)

| 항목 | API4_3 | API214_1 |
|------|--------|----------|
| **Base URL** | /B551015/API4_3 | /B551015/API214_1 |
| **Endpoint** | /raceResult_3 | /RaceDetailResult_1 |
| **파라미터 이름** | rc_date | rc_date (동일) |
| **응답 구조** | response > body > items > item | 동일 |
| **필드 이름** | 소문자 (rcDate, hrNo) | 동일 |

## 💡 주요 특징

1. **상세한 구간 기록**
   - 부경(부산경남): 10-8F, 8-6F, 6-4F, 4-2F, 2F-G, 1F-G
   - 서울/제주: S1F, G3F, G1F

2. **경마장별 차이**
   - meet=1: 서울
   - meet=2: 제주
   - meet=3: 부경(부산경남)

3. **날짜 검색 옵션**
   - rc_year: 연도별 검색
   - rc_month: 월별 검색
   - rc_date: 일별 검색

4. **페이지네이션**
   - numOfRows: 페이지당 결과 수
   - pageNo: 페이지 번호
   - totalCount: 전체 데이터 수

## 🚀 사용 예시

### 요청 URL
```
http://apis.data.go.kr/B551015/API214_1/RaceDetailResult_1
  ?ServiceKey=725f86c2e72ae4a10847e854827113c9959f61084843ef23d20934173f8418af
  &numOfRows=10
  &pageNo=1
  &meet=1
  &rc_date=20240113
  &rc_no=1
```

### JSON 응답 요청
```
http://apis.data.go.kr/B551015/API214_1/RaceDetailResult_1
  ?ServiceKey=725f86c2e72ae4a10847e854827113c9959f61084843ef23d20934173f8418af
  &_type=json
  &numOfRows=10
  &pageNo=1
  &meet=1
  &rc_date=20240113
```

## 📌 참고사항

- **서비스 시작일**: 2020-08-01
- **최대 메시지 크기**: 4000 byte
- **평균 응답 시간**: 500ms
- **초당 최대 트랜잭션**: 30 tps
- **서비스 제공자**: 이지성 / 한국마사회 정보화기획부 / kraromeo@naver.com


## 📊 응답 필드 상세 (Body - Item)

### 기본 정보
| 필드명 | 한글명 | 크기 | 필수 | 샘플 | 설명 |
|--------|--------|------|------|------|------|
| hrNo | 마번 | 7 | 1 | 0043233 | 마번 |
| hrName | 마명 | 30 | 1 | 은혜 | 마명 |
| hrTool | 장구내역 | 100 | 1 | 망사관,허근 | 장구내역 |
| age | 연령 | 3 | 1 | 3 | 연령 |
| ageCond | 연령조건 | 20 | 1 | 3 세 | 연령조건 |
| birthday | 생년월일 | 8 | 1 | 20190407 | 생년월일 |
| sex | 성별 | 10 | 1 | 수 | 성별 |
| name | 마필생산국가 | 20 | 1 | 한국 | 마필생산국가 |

### 기수/조교사/마주 정보
| 필드명 | 한글명 | 크기 | 필수 | 샘플 | 설명 |
|--------|--------|------|------|------|------|
| jkName | 기수명 | 30 | 1 | 안토니오 | 기수명 |
| jkNo | 기수번호 | 6 | 1 | 080576 | 기수번호 |
| trName | 조교사명 | 20 | 1 | 최용구 | 조교사명 |
| trNo | 조교사번호 | 6 | 1 | 070168 | 조교사번호 |
| owName | 마주명 | 30 | 1 | 강태구 | 마주명 |
| owNo | 마주번호 | 6 | 1 | 119016 | 마주번호 |

### 경주 정보
| 필드명 | 한글명 | 크기 | 필수 | 샘플 | 설명 |
|--------|--------|------|------|------|------|
| meet | 경마장명 | 20 | 1 | 서울 | 경마장명 |
| rcDate | 경주일자 | 8 | 1 | 20220220 | 경주일자 |
| rcDay | 경주요일 | 20 | 1 | 일요일 | 경주요일 |
| rcNo | 경주번호 | 2 | 1 | 1 | 경주번호 |
| rcName | 경주명 | 200 | 1 | 일반 | 경주명 |
| rcDist | 경주거리 | 4 | 1 | 1200 | 경주거리 |
| weather | 날씨 | 20 | 1 | 맑음 | 날씨 |
| track | 주로상태 | 20 | 1 | 건조 (2%) | 주로상태 |

### 경주 결과
| 필드명 | 한글명 | 크기 | 필수 | 샘플 | 설명 |
|--------|--------|------|------|------|------|
| ord | 순위 | 2 | 1 | 1 | 순위 |
| ordBigo | 순위비고 | 30 | 1 | - | 순위비고 |
| chulNo | 출전번호 | 3 | 1 | 11 | 출전번호 |
| rcTime | 경주기록 | 5,1 | 1 | 75.9 | 경주기록 |
| diffUnit | 착차 | 10 | 1 | - | 착차 |
| ilsu | 경주일수 | 3 | 1 | 12 | 경주일수 |
| rankRise | 승급순위 | 1 | 1 | 0 | 승급순위 |
| rating | 레이팅 | 6 | 1 | 0 | 레이팅 |

### 배당 및 상금
| 필드명 | 한글명 | 크기 | 필수 | 샘플 | 설명 |
|--------|--------|------|------|------|------|
| winOdds | 단승식배당율 | 8,1 | 1 | 4.6 | 단승식배당율 |
| plcOdds | 복승식 배당율 | 8,1 | 1 | 1.7 | 복승식 배당율 |
| chaksun1 | 1 착상금 | 12 | 1 | 22000000 | 1 착상금 |
| chaksun2 | 2 착상금 | 12 | 1 | 8800000 | 2 착상금 |
| chaksun3 | 3 착상금 | 12 | 1 | 5600000 | 3 착상금 |
| chaksun4 | 4 착상금 | 12 | 1 | 2000000 | 4 착상금 |
| chaksun5 | 5 착상금 | 12 | 1 | 1600000 | 5 착상금 |

### 부담 및 체중
| 필드명 | 한글명 | 크기 | 필수 | 샘플 | 설명 |
|--------|--------|------|------|------|------|
| budam | 부담구분 | 8 | 1 | 별정 A | 부담구분 |
| wgBudam | 부담중량 | 4,1 | 1 | 56 | 부담중량 |
| wgBudamBigo | 부담중량증량신청표기 | 1 | 1 | - | 부담중량증량신청표기 |
| wgHr | 마체감량 | 20 | 1 | 502(-2) | 마체감량 |
| wgJk | 기수감량 | 4,1 | 1 | 0 | 기수감량 |

### 등급 및 조건
| 필드명 | 한글명 | 크기 | 필수 | 샘플 | 설명 |
|--------|--------|------|------|------|------|
| rank | 등급조건 | 20 | 1 | 국 6 등급 | 등급조건 |
| prizeCond | 상금조건 | 30 | 1 | R0~0 | 상금조건 |

### 부가 정보
| 필드명 | 한글명 | 크기 | 필수 | 샘플 | 설명 |
|--------|--------|------|------|------|------|
| buga1 | 부가상금 1 | 12 | 1 | 0 | 부가상금 1 |
| buga2 | 부가상금 2 | 12 | 1 | 0 | 부가상금 2 |
| buga3 | 부가상금 3 | 12 | 1 | 0 | 부가상금 3 |

### 서울 구간 기록
| 필드명 | 한글명 | 크기 | 필수 | 샘플 | 설명 |
|--------|--------|------|------|------|------|
| seS1fAccTime | 서울 S1F 통과누적기록 | 5,1 | 1 | 13.6 | 서울 S1F 통과누적기록 |
| seG3fAccTime | 서울 G3F 통과누적기록 | 5,1 | 1 | 36.6 | 서울 G3F 통과누적기록 |
| seG1fAccTime | 서울 G1F 통과누적기록 | 5,1 | 1 | 62.1 | 서울 G1F 통과누적기록 |
| se_1cAccTime | 서울 1 코너통과누적기록 | 5,1 | 1 | 0 | 서울 1 코너통과누적기록 |
| se_2cAccTime | 서울 2 코너통과누적기록 | 5,1 | 1 | 0 | 서울 2 코너통과누적기록 |
| se_3cAccTime | 서울 3 코너통과누적기록 | 5,1 | 1 | 24.3 | 서울 3 코너통과누적기록 |
| se_4cAccTime | 서울 4 코너통과누적기록 | 5,1 | 1 | 43 | 서울 4 코너통과누적기록 |

### 서울/제주 구간 순위
| 필드명 | 한글명 | 크기 | 필수 | 샘플 | 설명 |
|--------|--------|------|------|------|------|
| sj_1cOrd | 서울,제주 1 코너구간통과순위 | 5,1 | 1 | 0 | 서울,제주 1 코너구간통과순위 |
| sj_2cOrd | 서울,제주 2 코너구간통과순위 | 5,1 | 1 | 0 | 서울,제주 2 코너구간통과순위 |
| sj_3cOrd | 서울,제주 3 코너구간통과순위 | 5,1 | 1 | 1 | 서울,제주 3 코너구간통과순위 |
| sj_4cOrd | 서울,제주 4 코너구간통과순위 | 5,1 | 1 | 1 | 서울,제주 4 코너구간통과순위 |
| sjG1fOrd | 서울,제주 G1F 구간통과순위 | 5,1 | 1 | 1 | 서울,제주 G1F 구간통과순위 |
| sjG3fOrd | 서울,제주 G3F 구간통과순위 | 5,1 | 1 | 1 | 서울,제주 G3F 구간통과순위 |
| sjS1fOrd | 서울,제주 S1F 구간통과순위 | 5,1 | 1 | 1 | 서울,제주 S1F 구간통과순위 |

### 제주 구간 기록
| 필드명 | 한글명 | 크기 | 필수 | 샘플 | 설명 |
|--------|--------|------|------|------|------|
| je_1cTime | 제주 1 코너통과기록 | 5,1 | 1 | 0 | 제주 1 코너통과기록 |
| je_2cTime | 제주 2 코너통과기록 | 5,1 | 1 | 0 | 제주 2 코너통과기록 |
| je_3cTime | 제주 3 코너통과기록 | 5,1 | 1 | 0 | 제주 3 코너통과기록 |
| je_4cTime | 제주 4 코너통과기록 | 5,1 | 1 | 0 | 제주 4 코너통과기록 |
| jeS1fTime | 제주 S-1F 통과기록 | 5,1 | 1 | 0 | 제주 S-1F 통과기록 |
| jeG3fTime | 제주 G-3F 통과기록 | 5,1 | 1 | 0 | 제주 G-3F 통과기록 |
| jeG1fTime | 제주 G-1F 통과기록 | 5,1 | 1 | 0 | 제주 G-1F 통과기록 |

### 부경(부산경남) 구간 기록
| 필드명 | 한글명 | 크기 | 필수 | 샘플 | 설명 |
|--------|--------|------|------|------|------|
| bu_10_8fTime | 부경 10-8F 통과기록 | 5,1 | 1 | 0 | 부경 10-8F 통과기록 |
| bu_8_6fTime | 부경 8-6F 통과기록 | 5,1 | 1 | 0 | 부경 8-6F 통과기록 |
| bu_6_4fTime | 부경 6-4F 통과기록 | 5,1 | 1 | 0 | 부경 6-4F 통과기록 |
| bu_4_2fTime | 부경 4-2F 통과기록 | 5,1 | 1 | 0 | 부경 4-2F 통과기록 |
| bu_2fGTime | 부경 2F-G 통과기록 | 5,1 | 1 | 0 | 부경 2F-G 통과기록 |
| bu_1fGTime | 부경 1F-G 통과기록 | 5,1 | 1 | 0 | 부경 1F-G 통과기록 |
| buS1fAccTime | 부경 S1F 통과누적기록 | 5,1 | 1 | 0 | 부경 S1F 통과누적기록 |
| buS1fOrd | 부경 S1F 통과순위 | 2 | 1 | 0 | 부경 S1F 통과순위 |
| buS1fTime | 부경 S1F 통과기록 | 5,1 | 1 | 0 | 부경 S1F 통과기록 |
| buG1fAccTime | 부경 G1F 통과누적기록 | 5,1 | 1 | 0 | 부경 G1F 통과누적기록 |
| buG1fOrd | 부경 G1F 통과순위 | 2 | 1 | 0 | 부경 G1F 통과순위 |
| buG2fAccTime | 부경 G2F 통과누적기록 | 5,1 | 1 | 0 | 부경 G2F 통과누적기록 |
| buG2fOrd | 부경 G2F 통과순위 | 2 | 1 | 0 | 부경 G2F 통과순위 |
| buG3fAccTime | 부경 G3F 통과누적기록 | 5,1 | 1 | 0 | 부경 G3F 통과누적기록 |
| buG3fOrd | 부경 G3F 통과순위 | 2 | 1 | 0 | 부경 G3F 통과순위 |
| buG4fAccTime | 부경 G4F 통과누적기록 | 5,1 | 1 | 0 | 부경 G4F 통과누적기록 |
| buG4fOrd | 부경 G4F 통과순위 | 2 | 1 | 0 | 부경 G4F 통과순위 |
| buG6fAccTime | 부경 G6F 통과누적기록 | 5,1 | 1 | 0 | 부경 G6F 통과누적기록 |
| buG6fOrd | 부경 G6F 통과순위 | 2 | 1 | 0 | 부경 G6F 통과순위 |
| buG8fAccTime | 부경 G8F 통과누적기록 | 5,1 | 1 | 0 | 부경 G8F 통과누적기록 |
| buG8fOrd | 부경 G8F 통과순위 | 2 | 1 | 0 | 부경 G8F 통과순위 |

## 🔄 API4_3과 API214_1 비교

| 항목 | API4_3 (이전) | API214_1 (신규) | 변경사항 |
|------|---------------|-----------------|----------|
| **Base URL** | /B551015/API4_3 | /B551015/API214_1 | ✅ 변경 |
| **Endpoint** | /raceResult_3 | /RaceDetailResult_1 | ✅ 변경 |
| **서비스 키** | 동일 | 동일 | ✅ 동일 |
| **파라미터** | meet, rc_date, rc_no | meet, rc_date, rc_no, rc_year, rc_month | ✅ 추가 옵션 |
| **응답 필드** | 약 70개 | 약 80개 | ✅ 필드 추가 |
| **구간 기록** | 서울/제주/부경 | 서울/제주/부경 (더 상세) | ✅ 개선 |
| **JSON 지원** | _type=json | _type=json | ✅ 동일 |

## ✅ 마이그레이션 체크리스트

### 1. URL 변경
- [ ] Base URL: /B551015/API4_3 → /B551015/API214_1
- [ ] Endpoint: /raceResult_3 → /RaceDetailResult_1

### 2. 코드 변경
- [ ] KraApiConfig.dart - BASE_URL 변경
- [ ] KraApiConfig.dart - RACE_RESULT 엔드포인트 변경
- [ ] .env 파일 - KRA_BASE_URL 변경

### 3. 테스트
- [ ] test_kra_real_api.dart 실행
- [ ] test_kra_integration.dart 실행
- [ ] Flutter 앱 실행 테스트

### 4. 응답 필드 확인
- [ ] 기존 필드 호환성 확인
- [ ] 새로운 필드 활용 검토
- [ ] 구간 기록 필드 매핑 확인

## 📝 참고사항

**API214_1의 장점:**
1. ✅ 더 상세한 구간 기록
2. ✅ 추가 검색 옵션 (rc_year, rc_month)
3. ✅ 개선된 응답 구조
4. ✅ 더 빠른 응답 시간 (500ms)

**주의사항:**
1. ⚠️ 엔드포인트 URL 변경 필수
2. ⚠️ 응답 필드 호환성 확인 필요
3. ⚠️ 기존 캐시 데이터 무효화 필요
